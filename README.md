# 基于数字水印的图片泄露检测

本项目实现了基于离散余弦变换(DCT)的数字水印算法，可用于图片泄露检测。该算法能够在图片中嵌入不可见的水印信息，并能在需要时提取水印以验证图片的所有权。

## 项目介绍

数字水印技术是一种将标识信息（水印）嵌入到数字媒体（如图像、音频、视频）中的技术，用于版权保护、来源追踪和完整性验证等。

本项目的主要功能：
1. 在图像中嵌入不可见水印
2. 从图像中提取水印
3. 对水印进行鲁棒性测试，包括各种图像处理操作

## 算法原理

本项目采用基于DCT（离散余弦变换）的水印算法，主要步骤如下：

1. 将图像转换到YCrCb颜色空间，仅在Y通道（亮度通道）嵌入水印
2. 将图像分成8x8的块，对每个块进行DCT变换
3. 在DCT系数的中频区域嵌入水印信息（选择中频系数可以在不可见性和鲁棒性之间取得平衡）
4. 进行逆DCT变换，得到带水印的图像
5. 提取水印时，对图像进行相同的DCT变换，然后提取嵌入的水印信息

## 安装与使用

### 环境要求

- Python 3.6+
- 所需依赖库：opencv-python, numpy, matplotlib, Pillow

### 安装依赖
pip install -r requirements.txt
### 运行测试
python -m src.test
### 运行示例
python examples/example.py
## 代码结构

- `src/watermark.py`: 水印嵌入和提取的核心实现
- `src/image_processing.py`: 图像处理函数，用于鲁棒性测试
- `src/test.py`: 自动化测试代码
- `examples/example.py`: 使用示例
- `docs/`: 算法说明文档

## 鲁棒性测试

项目实现了多种常见的图像处理攻击来测试水印的鲁棒性：

- 翻转（水平、垂直）
- 旋转（30度、90度）
- 平移
- 裁剪
- 缩放（放大、缩小）
- 亮度调整
- 对比度调整
- 高斯噪声
- JPEG压缩
- 高斯模糊

测试结果以相似度分数表示（0-1之间），分数越高表示水印提取效果越好。
